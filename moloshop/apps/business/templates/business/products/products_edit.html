{# apps/business/templates/business/products/edit_products.html #}

{% extends "users/base_userpanel.html" %}
{% load static %}
{% load form_utils %}

{% block users_content %}
<div class="container mt-4">
  <h2>
    {% if is_goods %}
      Редактировать товар: {{ form.instance.title|default:"Новый товар" }}
    {% else %}
      Редактировать услугу: {{ form.instance.title|default:"Новая услуга" }}
    {% endif %}
  </h2>

  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}

    <div class="row">
      <!-- Название -->
      <div class="col-12 mb-3">
        <label for="{{ form.title.id_for_label }}">Название</label><br>
        {{ form.title }}
        {% if form.title.errors %}
          <div class="error">{{ form.title.errors }}</div>
        {% endif %}
      </div>

      <!-- Картинка -->
      <div class="col-12 mb-3">
        <label for="{{ form.image.id_for_label }}">Изображение</label><br>
        {% if form.instance.image %}
          <div class="mb-2">
            <img src="{{ form.instance.image.url }}" alt="preview" style="max-width:150px; height:auto;">
          </div>
          <label>
            {{ form.image_clear }} Очистить
          </label>
        {% endif %}
        {{ form.image }}
        {% if form.image.errors %}
          <div class="error">{{ form.image.errors }}</div>
        {% endif %}
      </div>

      <!-- Описание -->
      <div class="col-12 mb-3">
        <label for="{{ form.description.id_for_label }}">Описание</label><br>
        {{ form.description }}
        {% if form.description.errors %}
          <div class="error">{{ form.description.errors }}</div>
        {% endif %}
      </div>

      <!-- Цена -->
      <div class="col-12 col-md-6 mb-3">
        <label for="{{ form.price.id_for_label }}">Цена</label><br>
        {{ form.price }}
        {% if form.price.errors %}
          <div class="error">{{ form.price.errors }}</div>
        {% endif %}
      </div>

      <!-- Активность -->
      <div class="col-12 col-md-6 mb-3">
        <label for="{{ form.is_active.id_for_label }}">Активно</label><br>
        {{ form.is_active }}
        {% if form.is_active.errors %}
          <div class="error">{{ form.is_active.errors }}</div>
        {% endif %}
      </div>
    </div>

    <!-- Кнопки -->
    <div class="row mt-3">
      <div class="col-12">
        <button type="submit" class="btn">Сохранить</button>
        <a href="{% url 'business:business_edit' business.slug %}" class="btn">Отмена</a>
      </div>
    </div>
  </form>
</div>
{% endblock %}
